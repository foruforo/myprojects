/**
 * 
 */
package com.netsol.controllers;

import java.util.ArrayList;
import java.util.List;

import org.springframework.validation.BindingResult;
import org.springframework.validation.FieldError;

import com.netsol.controllers.model.ErrorMessage;
import com.netsol.controllers.model.ValidateResponse;

/**
 * @author Harmeet Singh(Taara)
 *
 */
public abstract class BaseController<T> {

	public ValidateResponse processForm(T object, BindingResult result) {
		ValidateResponse validateResponse = new ValidateResponse();
		if (!result.hasErrors()) {
			validateResponse.setStatus("SUCCESS");
		} else {
			validateResponse.setStatus("FAIL");
			List<FieldError> allErrors = result.getFieldErrors();
			List<ErrorMessage> errorMesages = new ArrayList<ErrorMessage>();
			for (FieldError objectError : allErrors) {
				errorMesages.add(new ErrorMessage(objectError.getField(),
						objectError.getDefaultMessage()));
			}
			validateResponse.setErrorMessages(errorMesages);
		}
		return validateResponse;
	}
}
